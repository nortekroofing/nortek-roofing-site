<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width,initial-scale=1" />
  <title id="page-title">Project — Nortek Roofing</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div id="site-header"></div>
  <main>
    <section class="section">
      <div class="container">
        <h1 id="proj-title" class="section-title">Project</h1>
        <video id="proj-video" class="project-video" controls playsinline></video>
        <p id="proj-desc" class="project-desc"></p>
        <div id="proj-media" class="projects-grid"></div>
      </div>
    </section>
  </main>

  <div class="lightbox" id="lightbox"><img id="lightbox-img" alt=""></div>

  <div id="site-footer"></div>
  <script src="includes.js"></script>
  <script>
    const params = new URLSearchParams(location.search);
    const id = params.get('id');
    fetch('data/projects.json').then(r=>r.json()).then(list => {
      const proj = list.find(p => p.id === id) || list[0];
      document.getElementById('proj-title').textContent = proj.title;
      document.getElementById('page-title').textContent = proj.title + ' — Nortek Roofing';
      const vid = document.getElementById('proj-video');
      if(proj.video){
        vid.src = proj.video;
        vid.poster = proj.cover;
      } else {
        vid.style.display = 'none';
      }
      document.getElementById('proj-desc').textContent = proj.description || '';
      const grid = document.getElementById('proj-media');
      grid.innerHTML = (proj.media || []).map(src => `\n        <a href="${src}" class="tile"><img src="${src}" alt=""></a>`).join('');
      const lb = document.getElementById('lightbox');
      const lbImg = document.getElementById('lightbox-img');
      grid.addEventListener('click', e => {
        const a = e.target.closest('a.tile'); if(!a) return;
        e.preventDefault();
        lbImg.src = a.href; lb.classList.add('open');
      });
      lb.addEventListener('click', ()=> lb.classList.remove('open'));
    });
  </script>
</body>
</html>
